# 究竟什么风险

>风险是指在某一特定环境下，在某一特定时间段内，某种损失发生的可能性。

关键词，就是**损失、意外、可能性大小**，就是你没有预料到的损失。
你要想对他进行控制，就需要知道他发生的可能性，以及为这个可能性付出的成本。
这个成本往往体现在你为了防止风险，要损失的未来收益，和，你必须要止损带来的机会成本和沉没成本。

风险更体现在心理层面，。。。

具体的体现在：
- 止损：防止更大损失而必须放弃沉没成本，各层面，个股，整体金额（想想你究竟能忍受最大的下跌百分比是多少？）
- 

# 止损

收益，本质上是一种期望，未来是不确定的，平行宇宙有无数种可能，
而你对外来的一个收益率的期许，本质上就是一种，多种可能性的期望值，
你当然可以期待大收益，但是你自己心里清楚，那是个小概率事件；
同样，你害怕大的下跌负收益，但是，那同样也是一个小概率事件，
所以，你能做的，就是要小概率的大负收益的有一个防范。

如果发生了，就是你“投资生命中的无法承受之轻”，你无法承受。
比如下跌5%，对你来说，就已经是非常非常不愿意发生的事情，
但是，它确实发生了，这个时候，你的态度就很重要，
就像你遇到了人生的重大灾难或者失败一样，你应该什么样的态度面对？
是逃避，像鸵鸟一样，假装没有发生？
还是勇敢面对，承认自己的损失和失败，及时从失败和灾难的阴影里走出来？
你会说，当然应该选择从失败里走出来？
但是，应该，和实际是有距离的，应然和实然不是一回事，对吧？

止损，就是从失败里走出来，是承认自己的无能、失败，对自己的错误买单，接受这份苦楚。

也许，你还觉得，可能这个是最差的情况吧？我卖出后，可能立刻就会反弹，
而且涨到我无法想象的地步，我现在止损卖出，可能呢就错过了一波大行情。
是的，没错，但是，也可能是坠入更深的深渊呢！
想想，自己之前都没预料的事情都发生了，无论再大反弹还是大跌，都已经超出你的惊奇了，
你还想更惊奇么？你能承受的惊奇就是这个程度了，好吧，别再刺激自己了，
选择离场，遵守纪律，自律才能自由，后面的精彩，就不属于你的人生。

本质上，投资态度，就是人生态度的写照。


# 衡量风险

一般衡量风险，都使用波动率（volatility）的概念，就是，他沿着期望的波动程度。

一定要理解，价格的走势，是你我这种凡人无法预测的，要对未来充满敬畏。
过去的价格，不代表未来，未来是上帝在把控，你我无法揣度上帝的意愿。
但是，过去的价格，能让你一窥上帝的威严，他可以把价格坠入到何种境界，
跌10%，no,no,no，那是小case，上帝还让你见识过跌倒50%以上，
这样，你至少明白，他的威严，他的恐惧，而你，就有了可以参考的恐惧，
选择一个你能容忍的恐惧吧，超过他，你就瑟瑟的跪拜在他面前，彻底臣服。

所以，波动率（volatility），只是我们对过去发生的恐惧的认知，我们可以把他量化出来，
以备未来再次出现如此之恐惧时刻，我们立刻有所觉察和触发我们的敬畏之心。

这里，有典型的两个指标，可以供我们使用：
- 标准差
- ATR（Average True Rage）

## 标准差

这个不打算多说了，就是概率里的那个标准差，有了标准差，有了直方图，你就有了可以计算的概率的机会；如果他的分布更像正态分布，那每个收益率出现的概率的计算就更精确一些。

如何衡量是不是正态分布？看图说话？No，有很多方法呢，用QQ图，用偏度、峰度，都可以量化，这里就赘述了，可以自行谷歌学习。

## ATR

ATR（Average True Rage），是指近N天真实波幅TR的算术平均值；

而真实波幅TR，是这下面指标里面最大的一个：$$\max{}$$
- 今日最高价 - 今日最低价
- \|今日最高价 - 昨日收盘价价\|
- \|今日最低价 - 昨日收盘价价\|

你说，用今日最高减去最低，不就够了么？
不够！
你没考虑昨天的情况，如果今天是一个直接跳空高开呢？又或是一个跳空低开呢？
所以，用昨日的收盘价和今天的最高、最低再比比。

![](/images/20220213/1644727302472.jpg)

别忘了，这是个移动平均值，所以，还有个超参，N天。

## N倍回撤止损

标准差、ATR的概念，只是作为指标，我们要把它用起来，来控制回撤。

回撤的时候，可能是止损，也可能是止盈噢。

![](/images/20220213/1644735261531.jpg)

我们看这个图，来对着说，比如你定的N=4倍。

开仓后，如果下跌，就是你损失了，所以，这个时候，如果大于了4倍ATR的时候，你就需要清仓卖出止损了。

如果上涨了，你就赚了，但是，上涨到一定程度，回撤了，这个时候，你计算的就是回撤的损失是不是大于4倍ATR。

你算的回撤损失，就是上图中的右上的那个虚线，即，从最高点的价格 - 4倍ATR。是的，回撤，就是从历史的新高作为比较对象的。

注意，ATR也好、标准差也好，都是个值，而不是个百分比。

# 头寸控制

>“头寸”起源于清末民初的上海滩，本意是指一摞“袁大头”（银元），十枚一包，正好一寸（一英寸?），是当时一种通用的标准计量（数钱的方法）。在金融交易领域，所谓“头寸”，其实就是“持仓”或者“仓位”，也就是你已经买入持有的股票、期货、外汇货币对等可交易的金融产品。

持仓，是一门艺术。

你啥时候买？买多少？啥时候买？卖多少？每一个股票、标的分配多少资金？这些都需要考虑。

经典的头寸控制方法有：
- 每一固定金额交易一个单位
- 等价值交易单位
- 百分比风险模型
- 百分比波动幅度模型

## 每一固定金额交易一个单位

![](/images/20220213/1644736125072.jpg)

- 把投资100000元，分成4份，每份25000元
- 买入时，买入10手，无论是任何股票，都是10手

## 等价值交易单位

![](/images/20220213/1644736329802.jpg)

- 把投资100000元，分成4份，每份25000元
- 买入时，投入全部1份25000元，卖光目标股票

## 百分比风险模型

![](/images/20220213/1644736448246.jpg)

- 我有总投资100000万
- 确定我能忍受的最大下跌为5%，即5000元（5%是我根据自己的喜好定的）
- 我有一只要投资的股票价格为50元
- 确定我能容忍的某只股票最大下跌为10%
- 那么，这只股票我最多可以买多少：CPR

CPR公式：

$$P(头寸规模) = \frac{C(风险金额)}{R(每股风险)}$$

所以，这只股票我可以买入（头寸）= $$\frac{100000 * 5%}{50 * 10%}$$ = 1000股。

所以，你的资金池，是动态的了，不像前面2个，都是等分的了，不同的股票，会导致资金池被动态的分配给了不同的股票。

你也可以体会到，这种方法，实际上考虑了一只股票的最大风险，不会殃及到整体资金的安全。大白话就是，你这只股票，最多也就亏到我的整体容忍上限。上面例子中，我整体资金最大容忍亏5000，恰好也就是这只股票的最大亏损额5000。图中的**R**，就是这个损失值5000。

但是，如果我买了好几只，都一起亏，都亏到了每只股票的最大亏损度，那，一样会让你赔个底儿掉，对吧？这是个很大的问题，比如，大盘下跌的时候，狠可能会出现这种情况。

## 百分比波动幅度模型

![](/images/20220213/1644737444498.jpg)

这个和上面的“百分比风险模型”很像，百分比风险模型用的是算某只的损失的时候，用的是百分比，
而这个“百分比**波动率**模型”只不过换成了**波动率**，用标准差或者ATR替代了百分比而已。

- 我有总投资100000万
- 确定我能忍受的最大下跌为5%，即5000元（5%是我根据自己的喜好定的）
- 确定我能容忍的某只股票最大下跌的4倍标准差或者4倍ATR（比如ATR=2.5）
- 那么，这只股票我最多可以买多少：

$$P(头寸规模) = \frac{C(风险金额)}{ N* V(波动率)}$$

所以，这只股票我可以买入（头寸）= $$\frac{100000 * 5%}{4 * 2.5}$$ = 500股。

同“百分比风险模型”一样，它也一样有，同时下跌，导致整体损失过大的问题，这个问题他也有。

所以，这就引出，总风险控制的概念。

# 总风险控制

上面提到了，1只股票，就可能跌破你的整体风险控制额度，“百分比风险模型”和“百分比波动幅度模型”，
都有这个问题，所以，你得时刻盯着，所有的股票合计的回撤、合计的损失的整体风险。

具体点说个例子吧：

- 我有10万元，容忍度是5%的损失，即5000元
- 我买了A、B、C、D 4只股票，也对每只股票按照“百分比波动幅度模型”分配了头寸，资金恰好用光

现在，光A一只，就有可能跌到5000元的损失，4只，最大最差可能跌到5000x4=2万元，
这个损失20%要远远大于我的损失容忍度5%了。

那，如何解决？

其实，狠简单，就是把这损失的5000的风险，不是，赋予给1只股票，而是等分给4只股票。
上面的例子里，就是我最大能容忍5000元的损失，当我有1只持仓的时候，他只能最多跌5000元；
当我持仓4只的时候，每只最多只能跌5000/4=1250元，谁跌破这个数，谁就清仓out止损。
即，动态平均分配风险，这个方法叫 **“百分比波动幅度模型”**。

** 头寸数量 = （总风险/N）/ (单个头寸风险) **



# 经典指标

## 均线

## MACD

# 参考











