# 计量金融


# 统计基础

[我的分享PPT](/attached/stat.pdf)

## 基础概念

你抽样出来得到一个集合（$$X_1,X_2,...X_n$$），然后你尝试用这些样本去推断整体的统计特性（比如分布、均值、方差啥的。）

这个抽样集合（$$X_1,X_2,...X_n$$），它也是有个分布的呀，它也是一组随机变量的值啊，它也是被看做是一个随机变量（有自己的分布啥的）

然后你用这个集合（$$X_1,X_2,...X_n$$）构建出一些新的**“函数”**出来，得到的又是个新的随机变量，这玩意给了个新名字：**“统计量”**

常见的统计量：

- $$\bar{X}=\frac{1}{n}\sum_1^n X_i$$
- $$S^2=\frac{1}{n-1}\sum_1^n (X_i -\bar X)^2$$
....

我们后面不讨论一个抽样集合了，而都是讨论这些**统计量**。



## 几种分布

前面说过，抽样出来的集合（$$X_1,X_2,...X_n$$），也是有分布的，他们的分布，他们的**“函数”（统计量）**，也有一个分布了吧。

这里多说一句，你不是抽样么，你可以抽无数次啊（假如是放回抽样），我们说这个分布，指的是无数次的抽样的分布，这里的分布，就是你无数次抽样后，
这帮统计量的分布。

好，这帮货都会呈现啥分布呢？答案是常见的有“$$\mathcal{X}^2卡方分布,t分布，F分布$$”，参考：[1](https://www.cnblogs.com/think-and-do/p/6509239.html),[2](https://blog.csdn.net/anshuai_aw1/article/details/82735201)吧。

### 渐进分布

抽样集合符合一个分布，当抽样量大了以后，这个分布会趋向一个稳定分布，这个分布就叫这个统计量的渐进分布。

提这个概念干啥，是为了引出下面的这玩意：

如果$$X_1,X_2,...$$是总体样本N（0,$$\sigma^2$$）的样本集，可以证明，
- $$\sqrt{n}\bar{X}/\sigma$$ ~ N（0，1）

这个结论很有用，对后面假设检验，就构建这个统计量，用于假设检验。


### $$\mathcal{X}^2$$卡方分布

当 $$X_i$$ 服从标准正态分布（N（0,1））,由它构造出来的统计量，$$\sum_1^n X_i^2$$ 服从$$\mathcal{X}^2$$卡方分布。

![](/images/20210615/1623748500317.jpg)

n叫做自由度，自由度可以解释为自由的独立变量的个数，我也没深究。

对于卡方分布，**一堆正态分布的平方和** 就呈现了卡方分布。

### T分布

X ~ N（0，1）标准正态分布，Y ~ $$\mathcal{X}^2$$卡方分布，那，他们的合体，$$t=\frac{X}{\sqrt{Y/n}}$$ 服从自由度为n的T分布。

![](/images/20210615/1623749125965.jpg)

好了，你现在可以用这玩意了，

你抽出来的样本（$$X_1,X_2,...X_n$$），我们用他们构建一个新的统计量，

$$\bar{X}=\frac{1}{n}\sum_1^n X_i, S^2=\frac{1}{n-1}\sum_1^n (X_i - \bar{X})^2$$，

你看，前者是个正态分布，后者是个$$\mathcal{X}^2$$卡方分布，两者一凑（当然还得做一下归一化成标准正态分布啥的），就合体完正好服从T分布了。

嘿！你看，理论结合实践了，用起来了，居然把凑出的统计量，套到了一个T分布上了，哈哈。这T分布用处可以多了，后面会用的。


$$\frac{\sqrt{n}(\bar{X}-\mu)}{S} ~ t(n-1)$$

总结一下，**一个正态分布除以一个卡方分布，就变成了T分布**。

### F分布

再接再来，我们再“凑”一个新的分布出来！

先说说新引出的F分布，

Y 服从~ 自由度为m的$$\mathcal{X}^2$$卡方分布，Z 服从~ 自由度为n的$$\mathcal{X}^2$$卡方分布，俩合体一下，就变成了F分布。

$$X=\frac{Y/m}{Z/n}=\frac{nY}{mZ}$$

这合体，称作第一自由度为m，第二自由度为n的F分布：F（m,n）

![](/images/20210615/1623749731311.jpg)

总结一下，**一个卡方分布分布除以另外一卡方分布T分布，就变成了F分布**


## 假设检验

步骤：

1、提出原假设和备择假设，原假设就是你想验证的结论，备择假设是它的方面。

2、指定检验中的显著性水平，就是他们一般说的$$\alpha$$，往往都很小，比如0.05，$$1-\alpha$$就是**置信度**。

3、收集样本数据并计算检验统计量的值，就是算一下样本们的方差啊、均值啊

4、利用检验统计量的值计算p-值

5、p-值法的拒绝法则，如果p-值<=显著性水平的值，则拒绝原假设H0

6、解读统计结论

**【p值是什么，$$\alpha$$是什么？】**

[参]: [1](https://zhuanlan.zhihu.com/p/26068572)

其实就是概率，你假设检验了$$H_0$$,那$$H_0$$发生的概率就是p，要是这数



### 正态检验

看一个序列是不是符合正态分布。话说，正态检验太重要了，如果一个时间序列不符合正态分布，那后面的检验都没有意义了。

常见的有SW检验（样本<50）和KS检验（样本>50），[示例代码](https://github.com/piginzoo/fund_analysis/blob/master/test/test_stat.py)。

#### SW:Shapiro-Wilk检验（小数据<50）


Shapiro-Wilk检验和Lilliefor检验都是进行大小排序后得到的，所以易受异常值的影响。

Shapiro-Wilk检验只适用于小样本场合（3≤n≤50）

$${\left(\sum_{i=1}^n a_i x_{(i)}\right)^2 \over \sum_{i=1}^n (x_i-\overline{x})^2}$$


[参]：[1](https://zhuanlan.zhihu.com/p/26539771),[2](https://www.jianshu.com/p/e202069489a6),[3](https://www.biaodianfu.com/python-normal-distribution-test.html),[4](https://zhuanlan.zhihu.com/p/26477641),[5](https://www.medsci.cn/article/show_article.do?id=0805180e5132)

#### KS:Kolmogorov-Smirnov检验（小数据>50）

柯尔莫戈洛夫-斯米诺夫检验（Kolmogorov-Smirnov test），简称K-S检验

K-S检验适合用于大数据样本的正态性检验，当样本的数据量超过50行时，它被认为是一个大样本，我们倾向于看K-S检验的分析结果得出结论。



### T检验

T检验，又叫做学生T检验，用于样本含量较小（如n<30），总体标准差$$\sigma$$未知的正态分布。

t检验是用t分布理论来推论差异发生的概率，从而**比较两个平均数的差异是否显著**。与f检验、卡方检验并列。

## 参考

- [《统计学》 贾俊平](https://book.douban.com/subject/10956491/)


